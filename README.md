# Tabletastic

> Таблица с бесконечным скроллом на React

[Тестовое задания на стажировку в ВК](https://internship.vk.company/vacancy/1109)

---

## Оглавление

- [Предисловие](#предисловие)
- [Структура проекта](#структура-проекта)
- [Используемые зависимости](#используемые-зависимости)
- [Запуск проекта](#запуск-проекта)
- [Дизайн макеты](#дизайн-макеты)

---

## Предисловие
⚠️ Для того, чтобы видеть лоудеры ***запросы были искуственно замедлены***.

⚠️ Новая версия `json-server` [почему-то не возвращает хедер x-total-count](https://github.com/typicode/json-server/issues/1276), но версия 0.17.4 возвращает, я использовал ее.

Давно хотел воспользоваться и поизучать технологии из [TanStack](https://tanstack.com/), но, видимо для этого проекта это был overkill - можно было обойтись `axios` и здравым смыслом :).

Я использую кастомные скроллбары в таблице, чтобы была согласованность между разными браузерами. Однако, компонент `ScrollArea` перезаписывает поведение хендлера `onScroll`, поэтому я использовал IntersectionObserver с браузерного API чтобы следить за тем, когда нужно подгружать новые данные в таблицу.

Я не использовал стейт менеджеры, потому что `TanStack Query` предоставляет функцию инвалидации хеша, было интересно поработать с этим.

Для валидации формы исплользую `react-hook-form` и `zod`.

---

## Структура проекта

Было принято решение использовать около-плоскую архитектуру для проекта, потому что проект довольно небольшой.

###  Корневые файлы
- `App.tsx` - Главный компонент приложения
- `main.tsx` - Точка входа в приложение
- `index.css` - Глобальные стили / конфиг tailwindcss

### Компоненты
#### `components/`
- `my-component.tsx` - Компоненты
- `skeletons/` - Скелетоны для состояния загрузки
- `ui/` - UI-компоненты из Shadcn UI

### API слой
#### `api/`
- `client.ts` - HTTP-клиент (QueryClient)
- `fetchData.ts` - Функции для работы с API
- `index.ts` - Экспорт всех API функций

### Данные
#### `data/`
- `db.json` - Фиктивная база данных для разработки
- `large-db.json` - Большой набор тестовых данных

### Вспомогательные модули
#### `lib/`
- `utils.ts` - Вспомогательные функции и утилиты

### Тестирование
#### `tests/`
- `api/` - Тесты API модулей
- `components/` - Тесты компонент
- `setup.ts` - Настройка тестовой среды

### Типы
#### `types/`
- `index.ts` - Экспорт всех типов
- `users.ts` - Типы для работы с пользовательскими данными

---

## Используемые зависимости

- React
- TypeScript
- Tailwind CSS
- TanStack Table
- TanStack Query
- React Hook Form
- ShadCN UI Components
- json-server (для API)

---

## Запуск проекта

### Просмотр проекта
⚠️ Для настройки API в фронтенд-приложении, нужно создать файл `.env` корневой папки и добавить следующую строку:
```
VITE_API_URL=http://localhost:3000
```

1. Склонируйте репозиторий

   ```bash
   git clone https://github.com/kreoniz/table-management-vk.git
   cd table-management-vk
2. Установите зависимости с помощью [`pnpm`](https://pnpm.io/installation)

    ```bash
    pnpm install
3. Запустите сервер `json-server` на localhost:3000

    ```bash
    pnpm json-server ./src/data/db.json
4. Запустите фронтенд и перейдите на localhost:4173

    ```bash
    pnpm build
    pnpm preview

### Разработка проекта

1-3. Загрузите репозиторий и запустите сервер

4. Запустите фронтенд и перейдите на localhost:5173

    ```bash
    pnpm dev

### Тесты

1-3. Загрузите репозиторий и запустите сервер

4. Запустите тесты

    ```bash
    pnpm test

---

## Дизайн макеты

Перед тем, как приступить к разработке, был набросан дизайн примерный дизайн в [excalidraw](https://excalidraw.com/)

![Дизайн](https://github.com/kreoniz/table-management-vk/raw/main/images/design.png)
